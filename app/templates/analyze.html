{% extends 'base.html' %}{% comment %}<!--
###############################################################################
# Copyright 2012 Grigoriy Kramarenko.
###############################################################################
# This file is part of Barbaris.
#
#    Barbaris is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    Barbaris is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with Barbaris.  If not, see <http://www.gnu.org/licenses/>.
#
# Этот файл — часть Barbaris.
#
#   Barbaris - свободная программа: вы можете перераспространять ее и/или
#   изменять ее на условиях Стандартной общественной лицензии GNU в том виде,
#   в каком она была опубликована Фондом свободного программного обеспечения;
#   либо версии 3 лицензии, либо (по вашему выбору) любой более поздней
#   версии.
#
#   Barbaris распространяется в надежде, что она будет полезной,
#   но БЕЗО ВСЯКИХ ГАРАНТИЙ; даже без неявной гарантии ТОВАРНОГО ВИДА
#   или ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННЫХ ЦЕЛЕЙ. Подробнее см. в Стандартной
#   общественной лицензии GNU.
#
#   Вы должны были получить копию Стандартной общественной лицензии GNU
#   вместе с этой программой. Если это не так, см.
#   <http://www.gnu.org/licenses/>.
###############################################################################

-->{% endcomment %}

{% load i18n base_extras %}

{% block page_name %}Анализ{% endblock %}

{% block search %}{% endblock %}
{% block subnav_content %}
<li>
    <form id="form-start" class="form-search" action="" method="get">
        <fieldset>
            <div class="control-group">
                <div class="controls">
                    <div class="input-append">
                        <input id="filter_start" value="{{ start|date:"Y-m-d H:i:s" }}" name="start" type="text" class="input-medium" placeholder="Начальная дата" data-toggle="datetimepicker"/>
                        <input id="filter_end" value="{{ end|date:"Y-m-d H:i:s" }}" name="end" type="text" class="input-medium" placeholder="Конечная дата"  data-toggle="datetimepicker"/>
                        <button id="search-submit" type="submit" class="btn">&rang;</button>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</li>
{% subnav_filter request 'analyze' %}

{% endblock %}

{% block content %}
<legend>Заказы</legend>
<table id="table-analyze-orders" class="table table-condensed">
    <tbody>
        <tr>
            <td><span>Всего</span></td>
            <td><span>{{ orders.count }}</span></td>
        </tr>
        <tr>
            <td><span>В статусе "Принят"</span></td>
            <td><span>{{ accept_orders.count }}</span></td>
        </tr>
        <tr>
            <td><span>В статусе "Закрыт"</span></td>
            <td><span>{{ close_orders.count }}</span></td>
        </tr>
        <tr>
            <td><span>В статусе "Отменён"</span></td>
            <td><span>{{ cancel_orders.count }}</span></td>
        </tr>
    </tbody>
</table>

<legend>Счета</legend>
<table id="table-analyze-orders" class="table table-condensed">
    <tbody>
        <tr>
            <td><span>Всего</span></td>
            <td><span>{{ invoices.count }}</span></td>
            <td><span>На сумму: {{ invoices_summ }}</span></td>
        </tr>
        <tr>
            <td><span>Оплаченных полностью</span></td>
            <td><span>{{ payment_invoices.count }}</span></td>
            <td><span>На сумму: {{ payment_invoices_summ }}</span></td>
        </tr>
        <tr>
            <td><span>Оплаченных частично</span></td>
            <td><span>{{ avance_invoices.count }}</span></td>
            <td><span>На сумму: {{ avance_invoices_summ }}</span></td>
        </tr>
        <tr>
            <td><span>Неоплаченных</span></td>
            <td><span>{{ notpay_invoices.count }}</span></td>
            <td><span>На сумму: {{ notpay_invoices_summ }}</span></td>
        </tr>
    </tbody>
</table>
{% endblock %}


